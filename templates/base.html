<!DOCTYPE html>
<html>
<head>
	<title>Sudoku Solver</title>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

<style>

body {
	background-color: white;
	margin: 0;
	padding: 0;
}

/* Style the header */
h1 { 
	background-color:lightblue;
	font-size: 52px; 
	font-family: Georgia; 
	text-align: center;
	color: black;
	margin: 0;
	padding: 0;
}

/* Style the paragraph */
p { 
	font-size: 20px;
	text-align: center;
}

/* Style the table */
table { 
	border-collapse: collapse; 
	font-family: Times New Roman, sans-serif; 
}

/* Style the column groups and table body */
colgroup, tbody { 
	border: solid medium; 
}

/* Style the individual cells */
td { 
	border: solid thin;
	height: 2.5em;
	width: 2.5em;
	text-align: center;
	padding: 0; 
}

/* Style the input of the cells */
input {
	color: #000000;
	padding: 0;
	border: 0;
	text-align: center;
	background-color: #FFFFFF;
	font-size: 20px;
	width: 2.5em;
	height: 2.5em;
}

/* Class input for the solve button */
input[type=submit] {
	color: black;
	background-color: lightblue;
	cursor: pointer;
	width: 250px;
	margin: 0 auto;
	border: none;
	border-radius: 4px;
}

input[type=submit]:hover {
	background-color:#d4ebf2;
}

/* Class input for the clear button */
button {
	color: black;
	background-color: lightblue;
	cursor: pointer;
	width: 250px;
	height: 2.5em;
	margin: 0 auto;
	border: none;
	border-radius: 4px;
}

button:hover {
	background-color:#d4ebf2;
}

/* Class to add red border for cell */
.red-border{
	border: 2px solid red;
}

/* Class to display disaled solve button */
.disabled {
	opacity: .2;
}

/* Class to format cell for user's name */
.user-name{
	border: solid thin;
	height: 2em;
	width: 15em;
	text-align: center;
	padding: 0; 
}

</style>

</head>


<body>
<h1>Sudoku Solver</h1>

<p id="welcome-message" style = "font-size: 20px; font-family: Georgia;"/>

<br>
<form name="sud_form" action="{{url_for('sud_data')}}" method="POST">
	<table align="center">
		<colgroup><col><col><col></colgroup>
		<colgroup><col><col><col></colgroup>
		<colgroup><col><col><col></colgroup>
		<tbody> 
	   		<tr> 
	   			<td><input name="00" id="00" type="text" step="1" maxlength="1" onchange="validateInput('00')"></td>
	   			<td><input name="01" id="01" type="text" step="1" maxlength="1" onchange="validateInput('01')"></td>
	   			<td><input name="02" id="02" type="text" step="1" maxlength="1" onchange="validateInput('02')"></td>
	   			<td><input name="03" id="03" type="text" step="1" maxlength="1" onchange="validateInput('03')"></td>
	   			<td><input name="04" id="04" type="text" step="1" maxlength="1" onchange="validateInput('04')"></td>
	   			<td><input name="05" id="05" type="text" step="1" maxlength="1" onchange="validateInput('05')"></td>
	   			<td><input name="06" id="06" type="text" step="1" maxlength="1" onchange="validateInput('06')"></td>
	   			<td><input name="07" id="07" type="text" step="1" maxlength="1" onchange="validateInput('07')"></td>
	   			<td><input name="08" id="08" type="text" step="1" maxlength="1" onchange="validateInput('08')"></td>
	   		<tr>
	   			<td><input name="09" id="09" type="text" step="1" maxlength="1" onchange="validateInput('09')"></td>
	   			<td><input name="10" id="10" type="text" step="1" maxlength="1" onchange="validateInput('10')"></td>
	   			<td><input name="11" id="11" type="text" step="1" maxlength="1" onchange="validateInput('11')"></td>
	   			<td><input name="12" id="12" type="text" step="1" maxlength="1" onchange="validateInput('12')"></td>
	   			<td><input name="13" id="13" type="text" step="1" maxlength="1" onchange="validateInput('13')"></td>
	   			<td><input name="14" id="14" type="text" step="1" maxlength="1" onchange="validateInput('14')"></td>
	   			<td><input name="15" id="15" type="text" step="1" maxlength="1" onchange="validateInput('15')"></td>
	   			<td><input name="16" id="16" type="text" step="1" maxlength="1" onchange="validateInput('16')"></td>
	   			<td><input name="17" id="17" type="text" step="1" maxlength="1" onchange="validateInput('17')"></td>
	   		<tr> 
	   			<td><input name="18" id="18" type="text" step="1" maxlength="1" onchange="validateInput('18')"></td>
	   			<td><input name="19" id="19" type="text" step="1" maxlength="1" onchange="validateInput('19')"></td>
	   			<td><input name="20" id="20" type="text" step="1" maxlength="1" onchange="validateInput('20')"></td>
	   			<td><input name="21" id="21" type="text" step="1" maxlength="1" onchange="validateInput('21')"></td>
	   			<td><input name="22" id="22" type="text" step="1" maxlength="1" onchange="validateInput('22')"></td>
	   			<td><input name="23" id="23" type="text" step="1" maxlength="1" onchange="validateInput('23')"></td>
	   			<td><input name="24" id="24" type="text" step="1" maxlength="1" onchange="validateInput('24')"></td>
	   			<td><input name="25" id="25" type="text" step="1" maxlength="1" onchange="validateInput('25')"></td>
	   			<td><input name="26" id="26" type="text" step="1" maxlength="1" onchange="validateInput('26')"></td>
	   	<tbody>
	   		<tr> 
	   			<td><input name="27" id="27" type="text" step="1" maxlength="1" onchange="validateInput('27')"></td>
	   			<td><input name="28" id="28" type="text" step="1" maxlength="1" onchange="validateInput('28')"></td>
	   			<td><input name="29" id="29" type="text" step="1" maxlength="1" onchange="validateInput('29')"></td>
	   			<td><input name="30" id="30" type="text" step="1" maxlength="1" onchange="validateInput('30')"></td>
	   			<td><input name="31" id="31" type="text" step="1" maxlength="1" onchange="validateInput('31')"></td>
	   			<td><input name="32" id="32" type="text" step="1" maxlength="1" onchange="validateInput('32')"></td>
	   			<td><input name="33" id="33" type="text" step="1" maxlength="1" onchange="validateInput('33')"></td>
	   			<td><input name="34" id="34" type="text" step="1" maxlength="1" onchange="validateInput('34')"></td> 
	   			<td><input name="35" id="35" type="text" step="1" maxlength="1" onchange="validateInput('35')"></td>
	   		<tr>
	   			<td><input name="36" id="36" type="text" step="1" maxlength="1" onchange="validateInput('36')"></td>
	   			<td><input name="37" id="37" type="text" step="1" maxlength="1" onchange="validateInput('37')"></td>
	   			<td><input name="38" id="38" type="text" step="1" maxlength="1" onchange="validateInput('38')"></td>
	   			<td><input name="39" id="39" type="text" step="1" maxlength="1" onchange="validateInput('39')"></td>
	   			<td><input name="40" id="40" type="text" step="1" maxlength="1" onchange="validateInput('40')"></td>
	   			<td><input name="41" id="41" type="text" step="1" maxlength="1" onchange="validateInput('41')"></td>
	   			<td><input name="42" id="42" type="text" step="1" maxlength="1" onchange="validateInput('42')"></td>
	   			<td><input name="43" id="43" type="text" step="1" maxlength="1" onchange="validateInput('43')"></td> 
	   			<td><input name="44" id="44" type="text" step="1" maxlength="1" onchange="validateInput('44')"></td>
	   		<tr>
	   			<td><input name="45" id="45" type="text" step="1" maxlength="1" onchange="validateInput('45')"></td>
	   			<td><input name="46" id="46" type="text" step="1" maxlength="1" onchange="validateInput('46')"></td>
	   			<td><input name="47" id="47" type="text" step="1" maxlength="1" onchange="validateInput('47')"></td>
	   			<td><input name="48" id="48" type="text" step="1" maxlength="1" onchange="validateInput('48')"></td>
	   			<td><input name="49" id="49" type="text" step="1" maxlength="1" onchange="validateInput('49')"></td>
	   			<td><input name="50" id="50" type="text" step="1" maxlength="1" onchange="validateInput('50')"></td>
	   			<td><input name="51" id="51" type="text" step="1" maxlength="1" onchange="validateInput('51')"></td>
	   			<td><input name="52" id="52" type="text" step="1" maxlength="1" onchange="validateInput('52')"></td>
	   			<td><input name="53" id="53" type="text" step="1" maxlength="1" onchange="validateInput('53')"></td>
	  	<tbody>
	   		<tr> 
	   			<td><input name="54" id="54" type="text" step="1" maxlength="1" onchange="validateInput('54')"></td>
	   			<td><input name="55" id="55" type="text" step="1" maxlength="1" onchange="validateInput('55')"></td>
	   			<td><input name="56" id="56" type="text" step="1" maxlength="1" onchange="validateInput('56')"></td>
	   			<td><input name="57" id="57" type="text" step="1" maxlength="1" onchange="validateInput('57')"></td>
	   			<td><input name="58" id="58" type="text" step="1" maxlength="1" onchange="validateInput('58')"></td>
	   			<td><input name="59" id="59" type="text" step="1" maxlength="1" onchange="validateInput('59')"></td>
	   			<td><input name="60" id="60" type="text" step="1" maxlength="1" onchange="validateInput('60')"></td>
	   			<td><input name="61" id="61" type="text" step="1" maxlength="1" onchange="validateInput('61')"></td>
	   			<td><input name="62" id="62" type="text" step="1" maxlength="1" onchange="validateInput('62')"></td>
	   		<tr> 
	   			<td><input name="63" id="63" type="text" step="1" maxlength="1" onchange="validateInput('63')"></td>
	   			<td><input name="64" id="64" type="text" step="1" maxlength="1" onchange="validateInput('64')"></td>
	   			<td><input name="65" id="65" type="text" step="1" maxlength="1" onchange="validateInput('65')"></td>
	   			<td><input name="66" id="66" type="text" step="1" maxlength="1" onchange="validateInput('66')"></td>
	   			<td><input name="67" id="67" type="text" step="1" maxlength="1" onchange="validateInput('67')"></td>
	   			<td><input name="68" id="68" type="text" step="1" maxlength="1" onchange="validateInput('68')"></td>
	   			<td><input name="69" id="69" type="text" step="1" maxlength="1" onchange="validateInput('69')"></td>
	   			<td><input name="70" id="70" type="text" step="1" maxlength="1" onchange="validateInput('70')"></td>
	   			<td><input name="71" id="71" type="text" step="1" maxlength="1" onchange="validateInput('71')"></td>
	   		<tr> 
	   			<td><input name="72" id="72" type="text" step="1" maxlength="1" onchange="validateInput('72')"></td>
	   			<td><input name="73" id="73" type="text" step="1" maxlength="1" onchange="validateInput('73')"></td>
	   			<td><input name="74" id="74" type="text" step="1" maxlength="1" onchange="validateInput('74')"></td>
	   			<td><input name="75" id="75" type="text" step="1" maxlength="1" onchange="validateInput('75')"></td>
	   			<td><input name="76" id="76" type="text" step="1" maxlength="1" onchange="validateInput('76')"></td>
	   			<td><input name="77" id="77" type="text" step="1" maxlength="1" onchange="validateInput('77')"></td>
	   			<td><input name="78" id="78" type="text" step="1" maxlength="1" onchange="validateInput('78')"></td>
	   			<td><input name="79" id="79" type="text" step="1" maxlength="1" onchange="validateInput('79')"></td>
	   			<td><input name="80" id="80" type="text" step="1" maxlength="1" onchange="validateInput('80')"></td>
	</table>
	<br>
	<br>
	<div style="text-align: center;">
		<input type="submit" id="submit-button" value="Solve!" style= "font-size: 22px; font-family: Georgia;"/>
	</div>
	<br>
</form>
<form action="{{url_for('index')}}" method="POST">
	<div style="text-align: center;">
		<input type="submit" value= "Clear" style = "font-size: 22px; font-family: Georgia;"></input>
	</div>
</form><br>


<form action="{{url_for('index')}}" method="POST" onsubmit="updateName()">
	<div style="text-align: center;">
		<label for="user_name" style = "font-size: 22px; font-family: Georgia;">Enter your name:</label>
		<input type="text" class="user-name" name="user_name" id="user_name" style = "font-size: 22px; font-family: Georgia;"></input>
		<input type="submit" value="Submit" style = "font-size: 22px; font-family: Georgia;">
		<button type="button" onclick="clearName()" style = "font-size: 22px; font-family: Georgia;">Clear Name</button>
	</div>
</form><br>

<div class="container" style="text-align: center">
	<a tabindex="0"
	   class="btn btn-lg btn-primary" 
	   role="button" 
	   data-html="true" 
	   data-toggle="popover"
	   data-placement="top" 
	   data-trigger="focus" 
	   data-content="<p id='timer-display'>00:00</p>">Show timer</a>
</div>

<script>
// to load the popover
$(document).ready(function(){
    $('[data-toggle="popover"]').popover();   
});


const errors = new Map();

timer();

if (localStorage.getItem("name") != null) {
	document.getElementById("welcome-message").innerHTML = "Welcome back, " + localStorage.getItem("name") + "!";
}

function validateInput(id) {
	const elem = document.getElementById(id);
	const value = elem.value;
	const button = document.getElementById("submit-button");

	if (value == "") {
		elem.classList.remove("red-border");
		}
	else {
		if (["1", "2", "3", "4", "5", "6", "7", "8", "9"].indexOf(value) >= 0) {
			elem.classList.remove("red-border");
			errors.delete(id);
		}
		else {
			alert("Please enter a valid number.");
			elem.classList.add("red-border");
			button.classList.add("disabled");
			button.disabled = true;
			errors.set(id, 0);
		}
	}

	if (errors.size == 0) {
		button.classList.remove("disabled");
		button.disabled = false;
	}
}

function updateName() {
	const user_name = document.getElementById("user_name").value;
	localStorage.setItem("name", user_name);
}

function clearName() {
	localStorage.removeItem("name");
	location.replace(url_for('index'));
}

function timer() {
	var sec = 0;
	var mins = 0;
    var timer = setInterval(function(){
    	if (sec >= 60) {
    		sec = sec - 60;
    		mins++;
    	}
    	if (mins < 10) {
 	    	if (sec >= 10) {
	    		document.getElementById('timer-display').innerHTML = '0' + mins + ':' + sec;
	    	}
	        else {
	        	document.getElementById('timer-display').innerHTML = '0' + mins + ':0' + sec;
	        }
	    }
	    else {
	    	if (sec >= 10) {
	    		document.getElementById('timer-display').innerHTML = mins + ':' + sec;
	    	}
	        else {
	        	document.getElementById('timer-display').innerHTML = mins + ':0' + sec;
	        }
	    }
        sec++;
    }, 1000);
}

</script>

</body>
</html>

